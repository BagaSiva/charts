global:
  __metadata:
    label: "Global variables"
    description: "Global configurations applied to the cluster"
  dockerRegistryPrefix:
    __metadata:
      label: "Docker registry prefix to be used for images"
      description: "The defined registry uses the global prefix here"
      type: "string"
  imagePullSecret:
    __metadata:
      label: "Image Pull Secrets"
      description: "Image pull secret for the global registry"
      type: "string"
      immutable: false
      required: false
  installCerts:
    __metadata:
      label: "Whether to install certs or not"
      description: "Boolean value to install certs or not"
      type: "boolean"
  ibmProduct:
    __metadata:
      label: "String global IBM product"
      description: "The IBM product that's being installed"
      type: "string"
  sch:
    enabled:
      __metadata:
        name: "sch subchart"
        label: "ibm-sch subchart is used"
        description: "Set to false only is upstream chart provides ibm-sch chart"
        type: "boolean"
        hidden: false
  storageClassName:
    __metadata:
      name: "Storage Class Name"
      label: "name of kubernetes storage class"
      description: "name of storage class to use for persistence, blank for default storage class"
      type: string

minimumMasterNodes:
  __metadata:
    label: "Minimum master nodes for service"
    description: "The minimum number of master nodes is set to 2"
    type: "number"

clusterName:
  __metadata:
    label: "Name of the cluster to install in"
    description: "Specified the name of kubernetes cluster for installation"
    type: "string"
nodeGroup:
  __metadata:
    label: "Node group to install to"
    description: "Specified the name of node group for installation"
    type: "string"
    required: false
    #hidden: true

masterService:
  __metadata:
    label: "Service that non master groups will try to connect to when joining the cluster"
    description: "This should be set to clusterName + - + nodeGroup for your master group and will specify the service"
    type: "string"

roles:
  __metadata:
    label: "Specific roles added to the pod"
    description: "These will be set as environment variables. See below for individual settings"
  master:
    __metadata:
      label: "Master role that will be applied to this nodeGroup"
      description: "These will be set as environment variables. E.g. node.master=true. Values are true or false"
      type: "string"
  ingest:
    __metadata:
      label: "Ingest role that will be applied to this nodeGroup"
      description: "These will be set as environment variables. E.g. node.ingest=true. Values are true or false"
      type: "string"
  data:
    __metadata:
      label: "Data role that will be applied to this nodeGroup"
      description: "These will be set as environment variables. E.g. node.Data=true. Values are true or false"
      type: "string"

replicas:
  __metadata:
    label: "Number of replicas to create"
    description: "Replicas needed for the deployment"
    type: "number"

esMajorVersion:
  __metadata:
    label: "The es Major version"
    description: "The major version of elasticsearch"
    type: "string"

esConfig:
  __metadata:
    label: "Allows you to add any config files in /usr/share/elasticsearch/config/"
    description: "Create a dictionary of your config files. File examples are such as elasticsearch.yml and log4j2.properties"
  elasticsearchyml:
    __metadata:
      label: "Configuration for elasticsearch"
      description: "YAML to configure the elasticsearch instance"
      type: "string"

extraEnvs:
  __metadata:
    label: "Extra Envs"
    description: "Extra environment variables to append to this nodeGroup"
    type: "string"
    immutable: false
    required: false

username:
  __metadata:
    label: "UserName"
    description: "Username for elasticsearch"
    type: "string"
    immutable: false
    required: true

secretMounts:
  __metadata:
    label: "Secret Mounts"
    description: "A list of secrets and their paths to mount inside the pod"
    type: "string"
    immutable: false
    required: false

image:
  __metadata:
    label: "Elasticsearch image"
    description: "Elasticsearch Docker image"
  repository:
    __metadata:
      label: "Elasticsearch image repository"
      description: "Elasticsearch Docker image repository"
      type: "string"
  tag:
    __metadata:
      label: "Elasticsearch image tag"
      description: "Elasticsearch Docker image tag"
      type: "string"

imagePullPolicy:
  __metadata:
    label: "Image Pull Policy"
    description: "Image pull policy of elasticsearch"
    type: "string"
    immutable: false
    required: true

podAnnotations:
  __metadata:
    label: "Pod Annotations"
    description: "Pod annotations of elasticsearch"
  productName:
    __metadata:
      label: "Product Name"
      description: "Product Name of CP4D"
      type: "string"
      immutable: false
      required: true
  productID:
    __metadata:
      label: "Product ID"
      description: "Product ID of CP4D"
      type: "string"
      immutable: false
      required: true
  productVersion:
    __metadata:
      label: "Product Version"
      description: "Product Version of CP4D"
      type: "string"
      immutable: false
      required: true
  cloudpakName:
    __metadata:
      label: "CloudPak Name"
      description: "CloudPak Name of CP4D"
      type: "string"
      immutable: false
      required: true
  cloudpakId:
    __metadata:
      label: "CloudPak ID"
      description: "CloudPak ID of CP4D"
      type: "string"
      immutable: false
      required: true
  cloudpakVersion:
    __metadata:
      label: "CloudPak Version"
      description: "CloudPak Version of CP4D"
      type: "string"
      immutable: false
      required: true

esJavaOpts:
  __metadata:
    label: "ES Java Opts"
    description: "Elasticsearch java options"
    type: "string"
    immutable: false
    required: true

secretMounts:
  __metadata:
    label: "A list of secrets and their paths to mount inside the pod"
    description: "This is useful for mounting certificates for security and for mounting the X-Pack license"
    type: "string"
    required: false
    options:
      - label: "name"
        value: "name"
      - label: "secretName"
        value: "secretName"
      - label: "path"
        value: "path"

esJavaOpts:
  __metadata:
    label: "Java options for the helm chart"
    description: "Add the necessary java options to install the chart"
    type: "string"

resources:
  __metadata:
    label: "Resources to be used by the service"
    description: "Details about the resources can be configured in the children settings"
  requests:
    cpu:
      __metadata:
        label: "CPU request"
        description: "The requested CPU"
        type: "string"
        required: false
    memory:
      __metadata:
        label: "Memory request"
        description: "The requested memory"
        type: "string"
        required: false
  limits:
    cpu:
      __metadata:
        label: "CPU limit"
        description: "The CPU limit"
        type: "string"
        required: false
    memory:
      __metadata:
        label: "Memory limit"
        description: "The memory limit"
        type: "string"
        required: false

sidecarResources:
  __metadata:
    label: "Resources for sidecar"
    description: "Resources we need to spin up sidecar"
  requests:
    cpu:
      __metadata:
        label: "CPU request"
        description: "The requested CPU"
        type: "string"
        required: false
    memory:
      __metadata:
        label: "Memory request"
        description: "The requested memory"
        type: "string"
        required: false
  limits:
    cpu:
      __metadata:
        label: "CPU limit"
        description: "The CPU limit"
        type: "string"
        required: false
    memory:
      __metadata:
        label: "Memory limit"
        description: "The memory limit"
        type: "string"
        required: false


secretGeneration:
  __metadata:
    label: "Secret Generation"
    description: "job for generating secrets.. only runs is existingSecret=false"
  existingSecret:
    __metadata:
      label: "If secret-job should be run"
      description: "Bool value to specify if secret-job.yaml should run"
      type: "boolean"
  existingAuthSecret:
    __metadata:
      label: "existing auth secret"
      description: "name of the existing kube secret containing auth data"
      type: "string"
  existingCertSecret:
    __metadata:
      label: "existing cert secret"
      description: "name of the existing kube secret containing tls data"
      type: "string"
  image:
    repository:
      __metadata:
        label: "Repository"
        description: "Repository of the secret job"
        type: "string"
        immutable: false
        required: true
    tag:
      __metadata:
        label: "Tag"
        description: "Tag of the secret job image"
        type: "string"
        immutable: false
        required: true
#    imagePullSecrets:
#      __metadata:
#        label: "Image Pull Secrets"
#        description: "Image pull secret for the secrety job"
#        type: "string"
#        immutable: false
#        required: false
  resources:
    requests:
      cpu:
        __metadata:
          label: "CPU"
          description: "CPU Requests"
          type: "string"
          immutable: false
          required: true
      memory:
        __metadata:
          label: "Memory"
          description: "Memory Requests"
          type: "string"
          immutable: false
          required: true
    limits:
      cpu:
        __metadata:
          label: "CPU"
          description: "CPU limit"
          type: "string"
          immutable: false
          required: true
      memory:
        __metadata:
          label: "Memory"
          description: "Memory Limit"
          type: "string"
          immutable: false
          required: true

networkHost:
  __metadata:
    label: "IP of the host of the network"
    description: "The IP address for elasticsearch to use to host the network"
    type: "string"

networkPublishHost:
  __metadata:
    label: "Network Publish Host"
    description: "network publish host, set to 127.0.0.1 for supporting haproxy TLS"
    type: "string"
    immutable: false
    required: true

volumeClaimTemplate:
  __metadata:
    label: "Options about the volume claim template"
    description: "Children options can be used to adjust the volumeClaimTemplate"
  accessModes:
    __metadata:
      label: "Access Mode"
      description: "Access mode for the Persisent Volume. Defaults to ReadWriteOnce."
      required: false
      options:
        - label: "ReadWriteOnce"
          value: "ReadWriteOnce"
        - label: "ReadWriteMany"
          value: "ReadWriteMany"
  resources:
    requests:
      storage:
        __metadata:
          label: "Size of the created Persistent Volume Claim"
          description: "Defaults to 30GB of storage. Influences number of key-value pair that can be stored into the elasticsearch."
          type: "string"
          required: true

rbac:
  __metadata:
    label: "service account"
    description: "service account configuration"
  create:
    __metadata:
      label: "create a service account"
      description: "create a service account if one does not exist"
  serviceAccountName:
    __metadata:
      label: "name of existing service account"
      description: "name of existing service account if being used"

# podSecurityPolicy:
#   __metadata:
#     label: "Options for the pod security policy"
#     description: "You can customize your pod security policy using the child arguments below"
#   create:
#     __metadata:
#       label: "Create a psp"
#       description: "Create psp if it doesn't exist"
#       type: "boolean"
#   name:
#     __metadata:
#       label: "Name of the psp"
#       description: "The name that will be used for the psp"
#       type: "string"
#   spec:
#     privileged:
#       __metadata:
#         label: "Give privileged policy"
#         description: "If the pods need to be privileged, this setting can be changed"
#         type: "boolean"
#     runAsUser:
#       rule:
#         __metadata:
#           label: "User for modifying specified volumes"
#           description: "Set as RunAsAny by default but can be changed to more secure options as needed"
#           type: "string"
#     seLinux:
#       rule:
#         __metadata:
#           label: "Volume seLinux rule"
#           description: "Set as RunAsAny by default"
#           type: "string"
#     supplementalGroups:
#       rule:
#         __metadata:
#           label: "Volume supplementalGroups rule"
#           description: "Set as RunAsAny by default but can be changed as needed"
#           type: "string"
#     volumes:
#       __metadata:
#         label: "Volumes to be created"
#         description: "Set as an ordered list of options"
#         type: "string"

persistence:
  __metadata:
    label: "Pod persistence options"
    description: "You can modify the persistence values using the child settings"
  useDynamicProvisioning:
    __metadata:
      label: "Use Dynamic Provisioning"
      description: "Enable the use of dynamic provisioning"
      type: "boolean"
  enabled:
    __metadata:
      label: "Enable pod persistence"
      description: "Default persistence is false"
      type: "boolean"
  annotations:
    __metadata:
      label: "Any additional information about persistence that may be needed"
      description: "Allows for any additional annotations needed about the persistence settings"
      type: "string"

extraVolumes:
  __metadata:
    label: "Extra Volumes"
    description: "Put any extra volumes here"
    type: "string"
    immutable: false
    required: false

extraVolumeMounts:
  __metadata:
    label: "Extra Volume Mounts"
    description: "Put any extra volume mounts here"
    type: "string"
    immutable: false
    required: false

extraInitContainers:
  __metadata:
    label: "Any extra init containers desired for the chart"
    description: "Specified as a list of key value pairs with name, image, and command"
    type: "string"
    options:
      - label: "name"
        value: "name of the extra init container"
      - label: "image"
        value: "image of the init container"
      - label: "command"
        value: "command list that the container should perform"

priorityClassName:
  __metadata:
    label: "Priority class name"
    description: "This is the PriorityClass settings as defined in https://kubernetes.io/docs/concepts/configuration/pod-priority-preemption/#priorityclass"
    type: "string"

antiAffinityTopologyKey:
  __metadata:
    label: "Defines where nodes get assigned"
    description: "By default this will make sure two pods don't end up on the same node."
    type: "string"

antiAffinity:
  __metadata:
    label: "Pods will be deployed based on this policy"
    description: "Hard means that by default pods will never end up on the same node. Setting this to soft will do this as a 'best effort'"
    type: "string"

nodeAffinity:
  __metadata:
    label: "Nodes to install on"
    description: "This is the node affinity settings as defined in https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#node-affinity-beta-feature"
    type: "string"

podManagementPolicy:
  __metadata:
    label: "How to deploy the pods; serial or parallel"
    description: "The default is to deploy all pods serially. By setting this to parallel all pods are started at the same time when bootstrapping the cluster"
    type: "string"

protocol:
  __metadata:
    label: "Install protocol"
    description: "By default it is set to http"
    type: "string"
httpPort:
  __metadata:
    label: "HTTP port to use"
    description: "Default set to 9200"
    type: "number"
transportPort:
  __metadata:
    label: "Transport port for install"
    description: "Default port is set to 9300"
    type: "number"

service:
  __metadata:
    label: "Options for the service"
    description: "Children arguments are used to configure elasticsearch"
  type:
    __metadata:
      label: "Service type"
      description: "Default is ClusterIP"
      type: "string"
  nodePort:
    __metadata:
      label: "Service node port"
      description: "Port to expose the service on"
      type: "string"
  annotations:
    __metadata:
      label: "Annotations about the service"
      description: "A list of extra annotations about the service"
      type: "string"
  httpPortName:
    __metadata:
      label: "Name of http port"
      description: "Defaulted to http"
      type: "string"
  transportPortName:
    __metadata:
      label: "Name of the transport port"
      description: "Default is name is 'transport'"
      type: "string"

updateStrategy:
  __metadata:
    label: "Strategy for updating the service"
    description: "The default update strategy is a RollingUpdate"
    type: "string"

maxUnavailable:
  __metadata:
    label: "The max unavailable setting for the pod disruption budget"
    description: "The default value of 1 will make sure that kubernetes won't allow more than 1 of your pods to be unavailable during maintenance"
    type: "number"

securityContext:
  __metadata:
    label: "Security contexts for the pods"
    description: "Specific options configured in children settings"
  elasticsearch:
    runAsUser:
      __metadata:
        label: "Which user to run as"
        description: "Run elasticsearch as user specified"
        type: "number"
  creds:
    runAsUser:
      __metadata:
        label: "Which user to run as"
        description: "Run creds as user specified"
        type: "number"

terminationGracePeriod:
  __metadata:
    label: "How long to wait for the service to gracefully end"
    description: "Default termination grace period is 120 seconds, but can be adjusted"
    type: "number"

sysctlVmMaxMapCount:
  __metadata:
    label: "Total memory map space for the service on the machine"
    description: "Default is 262144 and can be increased or decreased as needed"
    type: "number"

livenessProbe:
  __metadata:
    label: "Kube Liveness Probe"
    description: "Liveness Probe Configuration"
  initialDelaySeconds:
    __metadata:
      label: "Initial Delay Seconds"
      description: "Delay in seconds before the readinessProbe starts"
  timeoutSeconds:
    __metadata:
      label: "Timeout Seconds"
      description: "Timeout in seconds"
  failureThreshold:
    __metadata:
      label: "Failure Threshold"
      description: "How many times before fail"
  periodSeconds:
    __metadata:
      label: "Period Seconds"
      description: "How long in between each check in seconds"
  successThreshold:
    __metadata:
      label: "Success Threshold"
      description: "How many times before success"

readinessProbe:
  __metadata:
    label: "Readiness Probe"
    description: "Readiness probe options"
  failureThreshold:
    __metadata:
      label: "Failure Threshold"
      description: "Failure threshold for readiness probe"
      type: "string"
      immutable: false
      required: true
  initialDelaySeconds:
    __metadata:
      label: "Initial Delay Seconds"
      description: "Initial delay seconds for readiness probe"
      type: "string"
      immutable: false
      required: true
  periodSeconds:
    __metadata:
      label: "Period Seconds"
      description: "Period seconds for readiness probe"
      type: "string"
      immutable: false
      required: true
  successThreshold:
    __metadata:
      label: "Success Threshold"
      description: "Success threshold for readiness probe"
      type: "string"
      immutable: false
      required: true
  timeoutSeconds:
    __metadata:
      label: "Timeout Seconds"
      description: "Timeout seconds for readiness probe"
      type: "string"
      immutable: false
      required: true

clusterHealthCheckParams:
  __metadata:
    label: "Cluster Health Check Parameters"
    description: "refer to https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster-health.html#request-params"
    type: "string"
    immutable: false
    required: true

schedulerName:
  __metadata:
    label: "Scheduler Name"
    description: "Use an alternate scheduler. ref: https://kubernetes.io/docs/tasks/administer-cluster/configure-multiple-schedulers/"
    type: "string"
    immutable: false
    required: false

nodeSelector:
  __metadata:
      label: "Node Selector"
      description: "Node selector values"
      type: "string"
      immutable: false
      required: false
tolerations:
  __metadata:
      label: "Tolerations"
      description: "Toleration values"
      type: "string"
      immutable: false
      required: false

ingress:
  __metadata:
    label: "Ingress"
    description: "Enabling this will publically expose your Elasticsearch instance. Only enable this if you have security enabled on your cluster"
  enabled:
    __metadata:
      label: "Enable Ingress"
      description: "To enable ingress"
      type: "boolean"
      immutable: false
      required: true
  annotations:
    __metadata:
      label: "Ingress Annotations"
      description: "Annotions for ingress"
      type: "string"
      immutable: false
      required: true
  path:
    __metadata:
      label: "Ingress path"
      description: "Path for ingress"
      type: "string"
      immutable: false
      required: true
  hosts:
    __metadata:
      label: "Ingress Hosts"
      description: "Hosts of ingress"
      type: "string"
      immutable: false
      required: true
  tls:
    __metadata:
      label: "Ingress TLS"
      description: "TLS for ingress"
      type: "string"
      immutable: false
      required: false

nameOverride:
  __metadata:
    label: "Change the name of created kubernetes object"
    description: "Specified the name of kubernetes object after the release name prefix."
    type: "string"
    required: false
    #hidden: true

masterTerminationFix:
  __metadata:
    label: "A patch to fix a bug with the master terminator"
    description: "A fix for this issue https://github.com/elastic/helm-charts/issues/63"
    type: "boolean"

lifecycle:
  __metadata:
    label: "Describes settings for specific phases of the pods lifecycle"
    description: "Allows modification of phases of the pods lifecycle (e.g. preStop, postStart. A list of commands required for each setting"
    type: "string"

clusterDomain:
  __metadata:
    label: "Cluster's domain name"
    description: "Default cluster domain name is set to cluster.local"
    type: "string"

useSSLProxy:
  __metadata:
    label: "Whether we should use SSL proxy or not"
    description: "haproxy - reverse proxy TLS/auth sidecar. Use SSL proxy or not"
    type: "boolean"

proxyHttpPort:
  __metadata:
    label: "HAproxy http port"
    description: "Specify all necessary key stores below"
    type: "number"
proxyTransportPort:
  __metadata:
    label: "The transport port for HAproxy"
    description: "Specified port number for HAproxy transport"
    type: "number"

haproxy:
  __metadata:
    label: "Options for HAproxy"
    description: "The configuration options for HAproxy"
  image:
    repository:
      __metadata:
        label: "HAproxy pull image"
        description: "The repository of the HAproxy image"
        type: "string"
    tag:
      __metadata:
        label: "Image tag"
        description: "The image tag of the HAproxy image"
        type: "string"
    pullPolicy:
      __metadata:
        label: "Pull policy of HAproxy image"
        description: "Specifies the pull policy of the HAproxy image"
        type: "string"
#  securityContext:
#    runAsUser:
#      __metadata:
#        label: "User to run HAproxy image as"
#        description: "The specified value to run the HAproxy image as"
#        type: "number"
  resources:
    requests:
      memory:
        __metadata:
          label: "Memory requests"
          description: "The memory requests"
          type: "string"
          required: false
      cpu:
        __metadata:
          label: "CPU requests"
          description: "The CPU requests"
          type: "string"
          required: false
    limits:
      memory:
        __metadata:
          label: "Memory limit"
          description: "The memory limit"
          type: "string"
          required: false
      cpu:
        __metadata:
          label: "CPU limit"
          description: "The CPU limit"
          type: "string"
          required: false

arch:
  # Type 1
  # Targeting in .arch.__metadata makes it a hard requirement to run on a
  # given platform
  __metadata:
    label: "Architecture scheduling preferences"
    description: "Targets a specific OS to use for the worker node."
  amd64:
    __metadata:
      label: "Preferences for amd64"
      description: "Specifies the preference for amd64"
      type: "string"
  ppc64le:
    __metadata:
      label: "Preferences for ppc64le"
      description: "Specifies the preference for ppc64le"
      type: "string"

pluginInitContainer:
  __metadata:
    label: "Plugin init container settings"
    description: "Plugin init container settings found in children"
  enabled:
    __metadata:
      label: "If the container should be enabled"
      description: "Boolean specifying if the container should be enabled"
      type: "boolean"

plugins:
  __metadata:
    label: "Any additional plugins required"
    description: "If you want any plugins installed, give them here as a list"
    type: "string"

initContainer:
  __metadata:
    label: "Init container settings"
    description: "Init container settings can be configured below"
  resources:
    limits:
      cpu:
        __metadata:
          label: "CPU limits"
          description: "The limits of CPU"
          type: "string"
          required: false
      memory:
        __metadata:
          label: "Memory limits"
          description: "The limits of memory"
          type: "string"
          required: false
    requests:
      cpu:
        __metadata:
          label: "CPU requests"
          description: "The requests CPU"
          type: "string"
          required: false
      memory:
        __metadata:
          label: "Memory requests"
          description: "The requests memory"
          type: "string"
          required: false

setSysctls:
  __metadata:
    label: "Set Sysctls"
    description: "To enable Sysctls"
    type: "boolean"
    immutable: false
    required: true
sysctlVmMaxMapCount:
  __metadata:
    label: "Sysctl Vm Max MapCount"
    description: "The max mapcount of systcl vm"
    type: "string"
    immutable: false
    required: true
